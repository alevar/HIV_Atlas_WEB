{"version":3,"file":"FacetedDialog-D1-iYlV6.js","sources":["../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedHeader.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilter.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilters.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedSelector.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedDialog.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Grid, IconButton, InputAdornment, TextField } from '@mui/material';\nimport { Menu } from '@jbrowse/core/ui';\n// icons\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MoreVert from '@mui/icons-material/MoreVert';\n// locals\nimport ShoppingCart from '../ShoppingCart';\nexport default function FacetedHeader({ model, }) {\n    const { faceted } = model;\n    const [anchorEl, setAnchorEl] = useState(null);\n    const { showOptions, showFilters, showSparse, useShoppingCart } = faceted;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Grid, { container: true, spacing: 4, alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(TextField, { label: \"Search...\", value: faceted.filterText, onChange: event => {\n                        faceted.setFilterText(event.target.value);\n                    }, InputProps: {\n                        endAdornment: (React.createElement(InputAdornment, { position: \"end\" },\n                            React.createElement(IconButton, { onClick: () => {\n                                    faceted.setFilterText('');\n                                } },\n                                React.createElement(ClearIcon, null)))),\n                    } })),\n            React.createElement(Grid, { item: true },\n                React.createElement(IconButton, { onClick: event => {\n                        setAnchorEl(event.currentTarget);\n                    } },\n                    React.createElement(MoreVert, null))),\n            React.createElement(Grid, { item: true },\n                React.createElement(ShoppingCart, { model: model }))),\n        React.createElement(Menu, { anchorEl: anchorEl, open: !!anchorEl, onClose: () => {\n                setAnchorEl(null);\n            }, onMenuItemClick: (_event, callback) => {\n                callback();\n                setAnchorEl(null);\n            }, menuItems: [\n                {\n                    label: 'Add tracks to selection instead of turning them on/off',\n                    onClick: () => {\n                        faceted.setUseShoppingCart(!useShoppingCart);\n                    },\n                    type: 'checkbox',\n                    checked: useShoppingCart,\n                },\n                {\n                    label: 'Show sparse metadata columns',\n                    onClick: () => {\n                        faceted.setShowSparse(!showSparse);\n                    },\n                    checked: showSparse,\n                    type: 'checkbox',\n                },\n                {\n                    label: 'Show facet filters',\n                    onClick: () => {\n                        faceted.setShowFilters(!showFilters);\n                    },\n                    checked: showFilters,\n                    type: 'checkbox',\n                },\n                {\n                    label: 'Show extra table options',\n                    onClick: () => {\n                        faceted.setShowOptions(!showOptions);\n                    },\n                    checked: showOptions,\n                    type: 'checkbox',\n                },\n            ] })));\n}\n","import React, { useState } from 'react';\nimport { Typography, FormControl, Select, IconButton, Tooltip, } from '@mui/material';\nimport { makeStyles } from 'tss-react/mui';\n// icon\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MinimizeIcon from '@mui/icons-material/Minimize';\nimport AddIcon from '@mui/icons-material/Add';\nimport { coarseStripHTML } from '@jbrowse/core/util';\nimport { observer } from 'mobx-react';\nconst useStyles = makeStyles()(theme => ({\n    facet: {\n        margin: 0,\n        marginLeft: theme.spacing(2),\n    },\n    select: {\n        marginBottom: theme.spacing(2),\n    },\n}));\nfunction ClearButton({ onClick }) {\n    return (React.createElement(Tooltip, { title: \"Clear selection on this facet filter\" },\n        React.createElement(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\" },\n            React.createElement(ClearIcon, null))));\n}\nfunction ExpandButton({ visible, onClick, }) {\n    return (React.createElement(Tooltip, { title: \"Minimize/expand this facet filter\" },\n        React.createElement(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\" }, visible ? React.createElement(MinimizeIcon, null) : React.createElement(AddIcon, null))));\n}\nconst FacetFilter = observer(function ({ column, vals, model, }) {\n    const { classes } = useStyles();\n    const [visible, setVisible] = useState(true);\n    const { faceted } = model;\n    const { filters } = faceted;\n    const { field } = column;\n    return (React.createElement(FormControl, { className: classes.facet, fullWidth: true },\n        React.createElement(\"div\", null,\n            React.createElement(Typography, { component: \"span\" }, field),\n            React.createElement(ClearButton, { onClick: () => {\n                    faceted.setFilter(field, []);\n                } }),\n            React.createElement(ExpandButton, { visible: visible, onClick: () => {\n                    setVisible(!visible);\n                } })),\n        visible ? (React.createElement(Select, { multiple: true, native: true, className: classes.select, value: filters.get(column.field) || [], onChange: event => {\n                faceted.setFilter(column.field, \n                // @ts-expect-error\n                [...event.target.options]\n                    .filter(opt => opt.selected)\n                    .map(opt => opt.value));\n            } }, vals\n            .sort((a, b) => a[0].localeCompare(b[0]))\n            .map(([name, count]) => (React.createElement(\"option\", { key: name, value: name },\n            coarseStripHTML(name),\n            \" (\",\n            count,\n            \")\"))))) : null));\n});\nexport default FacetFilter;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n// locals\nimport FacetFilter from './FacetFilter';\nimport { getRowStr } from './util';\nconst FacetFilters = observer(function ({ rows, columns, model, }) {\n    var _a, _b;\n    const { faceted } = model;\n    const { filters } = faceted;\n    const facets = columns.slice(1);\n    const uniqs = new Map(facets.map(f => [f.field, new Map()]));\n    // this code \"stages the facet filters\" in order that the user has selected\n    // them, which relies on the js behavior that the order of the returned keys is\n    // related to the insertion order.\n    const filterKeys = faceted.filters.keys();\n    const facetKeys = facets.map(f => f.field);\n    const ret = new Set();\n    for (const entry of filterKeys) {\n        // give non-empty filters priority\n        if ((_a = filters.get(entry)) === null || _a === void 0 ? void 0 : _a.length) {\n            ret.add(entry);\n        }\n    }\n    for (const entry of facetKeys) {\n        ret.add(entry);\n    }\n    let currentRows = rows;\n    for (const facet of ret) {\n        const elt = uniqs.get(facet);\n        for (const row of currentRows) {\n            const key = getRowStr(facet, row);\n            const val = elt.get(key);\n            // we don't allow filtering on empty yet\n            if (key) {\n                if (val === undefined) {\n                    elt.set(key, 1);\n                }\n                else {\n                    elt.set(key, val + 1);\n                }\n            }\n        }\n        const filter = ((_b = filters.get(facet)) === null || _b === void 0 ? void 0 : _b.length)\n            ? new Set(filters.get(facet))\n            : undefined;\n        currentRows = currentRows.filter(row => filter !== undefined ? filter.has(getRowStr(facet, row)) : true);\n    }\n    return (React.createElement(\"div\", null, facets.map(c => (React.createElement(FacetFilter, { key: c.field, vals: [...uniqs.get(c.field)], column: c, model: model })))));\n});\nexport default FacetFilters;\n","import React, { useState } from 'react';\nimport { transaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { getRoot, resolveIdentifier } from 'mobx-state-tree';\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\n// jbrowse\nimport { ResizeHandle } from '@jbrowse/core/ui';\nimport SanitizedHTML from '@jbrowse/core/ui/SanitizedHTML';\nimport { getEnv, measureGridWidth } from '@jbrowse/core/util';\nimport { makeStyles } from 'tss-react/mui';\nimport FacetedHeader from './FacetedHeader';\nimport FacetFilters from './FacetFilters';\nimport TrackLabelMenu from '../tree/TrackLabelMenu';\nconst useStyles = makeStyles()({\n    cell: {\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    resizeHandle: {\n        marginLeft: 5,\n        background: 'grey',\n        width: 5,\n    },\n});\nconst frac = 0.75;\nconst FacetedSelector = observer(function FacetedSelector({ model, }) {\n    var _a;\n    const { classes } = useStyles();\n    const { view, selection, shownTrackIds, faceted } = model;\n    const { rows, panelWidth, showFilters, useShoppingCart, showOptions, filteredRows, filteredNonMetadataKeys, filteredMetadataKeys, visible, } = faceted;\n    const { pluginManager } = getEnv(model);\n    const [widths, setWidths] = useState({\n        name: measureGridWidth(rows.map(r => r.name), { maxWidth: 500, stripHTML: true }) + 15,\n        ...Object.fromEntries(filteredNonMetadataKeys\n            .filter(f => visible[f])\n            .map(e => [\n            e,\n            measureGridWidth(rows.map(r => r[e]), { maxWidth: 400, stripHTML: true }),\n        ])),\n        ...Object.fromEntries(filteredMetadataKeys\n            .filter(f => visible[`metadata.${f}`])\n            .map(e => {\n            return [\n                `metadata.${e}`,\n                measureGridWidth(rows.map(r => r.metadata[e]), { maxWidth: 400, stripHTML: true }),\n            ];\n        })),\n    });\n    const columns = [\n        {\n            field: 'name',\n            hideable: false,\n            renderCell: params => {\n                const { value, row } = params;\n                const { id, conf } = row;\n                return (React.createElement(\"div\", { className: classes.cell },\n                    React.createElement(SanitizedHTML, { html: value }),\n                    React.createElement(TrackLabelMenu, { id: id, conf: conf, trackId: id, model: model })));\n            },\n            width: (_a = widths.name) !== null && _a !== void 0 ? _a : 100,\n        },\n        ...filteredNonMetadataKeys.map(e => {\n            var _a;\n            return {\n                field: e,\n                width: (_a = widths[e]) !== null && _a !== void 0 ? _a : 100,\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (React.createElement(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n        ...filteredMetadataKeys.map(e => {\n            var _a;\n            return {\n                field: `metadata.${e}`,\n                headerName: ['name', ...filteredNonMetadataKeys].includes(e)\n                    ? `${e} (from metadata)`\n                    : e,\n                width: (_a = widths[`metadata.${e}`]) !== null && _a !== void 0 ? _a : 100,\n                valueGetter: (_, row) => { var _a; return `${(_a = row.metadata[e]) !== null && _a !== void 0 ? _a : ''}`; },\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (React.createElement(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n    ];\n    return (React.createElement(React.Fragment, null,\n        React.createElement(FacetedHeader, { model: model }),\n        React.createElement(\"div\", { style: {\n                display: 'flex',\n                overflow: 'hidden',\n                height: window.innerHeight * frac,\n                width: window.innerWidth * frac,\n            } },\n            React.createElement(\"div\", { style: {\n                    height: window.innerHeight * frac,\n                    width: window.innerWidth * frac - (showFilters ? panelWidth : 0),\n                } },\n                React.createElement(DataGrid, { rows: filteredRows, onColumnWidthChange: arg => {\n                        setWidths({ ...widths, [arg.colDef.field]: arg.width });\n                    }, columnVisibilityModel: visible, onColumnVisibilityModelChange: n => {\n                        faceted.setVisible(n);\n                    }, columnHeaderHeight: 35, checkboxSelection: true, disableRowSelectionOnClick: true, keepNonExistentRowsSelected: true, onRowSelectionModelChange: userSelectedIds => {\n                        if (!useShoppingCart) {\n                            const a1 = shownTrackIds;\n                            const a2 = new Set(userSelectedIds);\n                            // synchronize the user selection with the view\n                            // see share https://stackoverflow.com/a/33034768/2129219\n                            transaction(() => {\n                                ;\n                                [...a1].filter(x => !a2.has(x)).map(t => view.hideTrack(t));\n                                [...a2]\n                                    .filter(x => !a1.has(x))\n                                    .map(t => {\n                                    view.showTrack(t);\n                                    model.addToRecentlyUsed(t);\n                                });\n                            });\n                        }\n                        else {\n                            const root = getRoot(model);\n                            const schema = pluginManager.pluggableConfigSchemaType('track');\n                            model.setSelection(userSelectedIds.map(id => resolveIdentifier(schema, root, id)));\n                        }\n                    }, rowSelectionModel: useShoppingCart\n                        ? selection.map(s => s.trackId)\n                        : [...shownTrackIds], slots: { toolbar: showOptions ? GridToolbar : null }, slotProps: {\n                        toolbar: {\n                            printOptions: {\n                                disableToolbarButton: true,\n                            },\n                        },\n                    }, columns: columns, rowHeight: 25 })),\n            showFilters ? (React.createElement(React.Fragment, null,\n                React.createElement(ResizeHandle, { vertical: true, onDrag: dist => faceted.setPanelWidth(panelWidth - dist), className: classes.resizeHandle }),\n                React.createElement(\"div\", { style: { width: panelWidth, overflow: 'auto' } },\n                    React.createElement(FacetFilters, { model: model, rows: rows, columns: columns })))) : null)));\n});\nexport default FacetedSelector;\n","import React from 'react';\nimport { DialogContent } from '@mui/material';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { observer } from 'mobx-react';\nimport FacetedSelector from './FacetedSelector';\nconst FacetedTrackSelectorDialog = observer(function (props) {\n    const { handleClose } = props;\n    return (React.createElement(Dialog, { open: true, onClose: handleClose, maxWidth: \"xl\", title: \"Faceted track selector\" },\n        React.createElement(DialogContent, null,\n            React.createElement(FacetedSelector, { ...props }))));\n});\nexport default FacetedTrackSelectorDialog;\n"],"names":["FacetedHeader","model","faceted","anchorEl","setAnchorEl","useState","showOptions","showFilters","showSparse","useShoppingCart","React","Grid","TextField","event","InputAdornment","IconButton","ClearIcon","MoreVert","ShoppingCart","Menu","_event","callback","useStyles","makeStyles","theme","ClearButton","onClick","Tooltip","ExpandButton","visible","MinimizeIcon","AddIcon","FacetFilter","observer","column","vals","classes","setVisible","filters","field","FormControl","Typography","Select","opt","a","b","name","count","coarseStripHTML","FacetFilters","rows","columns","_a","_b","facets","uniqs","f","filterKeys","facetKeys","ret","entry","currentRows","facet","elt","row","key","getRowStr","val","filter","c","frac","FacetedSelector","view","selection","shownTrackIds","panelWidth","filteredRows","filteredNonMetadataKeys","filteredMetadataKeys","pluginManager","getEnv","widths","setWidths","measureGridWidth","r","e","params","value","id","conf","SanitizedHTML","TrackLabelMenu","_","DataGrid","arg","n","userSelectedIds","root","getRoot","schema","resolveIdentifier","a1","a2","transaction","x","t","s","GridToolbar","ResizeHandle","dist","FacetedTrackSelectorDialog","props","handleClose","Dialog","DialogContent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}