import{c,u as l,O as d,z as p,A as g}from"./rpcWorker-CJ7cIcjW.js";function m(n){const e=n.slice(n.lastIndexOf("/")+1);return e.slice(0,e.lastIndexOf("."))}class A extends c.BaseFeatureDataAdapter{async getAdapters(){const e=this.getSubAdapter;if(!e)throw new Error("no getSubAdapter available");let a=this.getConf("subadapters");return a!=null&&a.length||(a=this.getConf("bigWigs").map(s=>({type:"BigWigAdapter",source:m(s),bigWigLocation:{uri:s}}))),Promise.all(a.map(async t=>{const s=(await e(t)).dataAdapter;return{source:t.name||s.id,...t,dataAdapter:s}}))}async getRefNames(e){const a=await this.getAdapters(),t=await Promise.all(a.map(s=>s.dataAdapter.getRefNames(e)));return[...new Set(t.flat())]}async getGlobalStats(e){const a=await this.getAdapters(),t=(await Promise.all(a.map(r=>{var u,o;return(o=(u=r.dataAdapter).getGlobalStats)===null||o===void 0?void 0:o.call(u,e)}))).filter(r=>!!r),s=l.min(t.map(r=>r.scoreMin)),i=l.max(t.map(r=>r.scoreMax));return{scoreMin:s,scoreMax:i}}getFeatures(e,a={}){return d(async t=>{const s=await this.getAdapters();p(...s.map(i=>i.dataAdapter.getFeatures(e,a).pipe(g(r=>r.get("source")?r:new l.SimpleFeature({...r.toJSON(),uniqueId:`${i.source}-${r.id()}`,source:i.source}))))).subscribe(t)},a.signal)}async getMultiRegionFeatureDensityStats(e){return{featureDensity:0}}async getSources(){return(await this.getAdapters()).map(({dataAdapter:a,source:t,name:s,...i})=>({name:t,__name:s,...i}))}freeResources(){}}A.capabilities=["hasResolution","hasLocalStats","hasGlobalStats"];export{A as default};
//# sourceMappingURL=MultiWiggleAdapter-BRdGVREc.js.map
