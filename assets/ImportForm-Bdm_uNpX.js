import{o as x,u as A,R as e,aB as I,aC as L,m as M,r as m,b as F,aD as O,aE as D,aF as G,aG as u,aH as d,aa as T,z as V,a as w}from"./rpcWorker-CL9qhe4-.js";const _=x(function({model:t,selectedAsm:r,value:o,setValue:i,setOption:c}){const g=A.getSession(t),{assemblyManager:p,textSearchManager:n}=g,{rankSearchResults:E}=t,s=t.searchScope(r),v=p.get(r);return e.createElement(I,{fetchResults:a=>L({queryString:a,assembly:v,textSearchManager:n,rankSearchResults:E,searchScope:s}),model:t,assemblyName:r,value:o,minWidth:270,onChange:a=>{i(a)},onSelect:a=>{c(a)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),z=M()(t=>({importFormContainer:{padding:t.spacing(2)},button:{margin:t.spacing(2)},container:{padding:t.spacing(4)}})),P=x(function({model:t}){var r;const{classes:o}=z(),i=A.getSession(t),{assemblyNames:c,assemblyManager:g}=i,{error:p}=t,[n,E]=m.useState(c[0]),[s,v]=m.useState(),a=g.get(n),S=c.length?a==null?void 0:a.error:"No configured assemblies",h=S||p,[l,N]=m.useState(""),y=a==null?void 0:a.regions,k=!!y,C=y&&((r=y[0])===null||r===void 0?void 0:r.refName)||"";return m.useEffect(()=>{N(C)},[C,n]),e.createElement("div",{className:o.container},h?e.createElement(F.ErrorMessage,{error:h}):null,e.createElement(O,{className:o.importFormContainer},e.createElement("form",{onSubmit:async b=>{var f;if(b.preventDefault(),t.setError(void 0),l)try{(s==null?void 0:s.getDisplayString())===l&&s.hasLocation()?await D({option:s,model:t,assemblyName:n}):!((f=s==null?void 0:s.results)===null||f===void 0)&&f.length?t.setSearchResults(s.results,s.getLabel(),n):a&&await G({input:l,assembly:a,model:t})}catch(R){console.error(R),i.notify(`${R}`,"warning")}}},e.createElement(u,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},e.createElement(u,{item:!0},e.createElement(d,null,e.createElement(F.AssemblySelector,{onChange:b=>{E(b)},localStorageKey:"lgv",session:i,selected:n}))),e.createElement(u,{item:!0},n?S?e.createElement(T,{style:{color:"red"}}):k?e.createElement(d,null,e.createElement(_,{value:l,setValue:N,selectedAsm:n,setOption:v,model:t})):e.createElement(V,{size:20,disableShrink:!0}):null),e.createElement(u,{item:!0},e.createElement(d,null,e.createElement(w,{type:"submit",disabled:!l,className:o.button,variant:"contained",color:"primary"},"Open")),e.createElement(d,null,e.createElement(w,{disabled:!l,className:o.button,onClick:()=>{t.setError(void 0),t.showAllRegionsInAssembly(n)},variant:"contained",color:"secondary"},"Show all regions in assembly")))))))});export{P as default};
//# sourceMappingURL=ImportForm-Bdm_uNpX.js.map
