import{o as A,u as F,R as e,ar as I,as as L,m as M,a as u,c as w,at as O,au as T,av as V,aw as m,ax as d,ae as _,i as B,B as x}from"./index-ClFcCqS6.js";const D=A(function({model:t,selectedAsm:r,value:o,setValue:i,setOption:c}){const g=F.getSession(t),{assemblyManager:p,textSearchManager:n}=g,{rankSearchResults:E}=t,a=t.searchScope(r),v=p.get(r);return e.createElement(I,{fetchResults:s=>L({queryString:s,assembly:v,textSearchManager:n,rankSearchResults:E,searchScope:a}),model:t,assemblyName:r,value:o,minWidth:270,onChange:s=>{i(s)},onSelect:s=>{c(s)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),G=M()(t=>({importFormContainer:{padding:t.spacing(2)},button:{margin:t.spacing(2)},container:{padding:t.spacing(4)}})),j=A(function({model:t}){var r;const{classes:o}=G(),i=F.getSession(t),{assemblyNames:c,assemblyManager:g}=i,{error:p}=t,[n,E]=u.useState(c[0]),[a,v]=u.useState(),s=g.get(n),S=c.length?s==null?void 0:s.error:"No configured assemblies",h=S||p,[l,N]=u.useState(""),y=s==null?void 0:s.regions,k=!!y,R=y&&((r=y[0])===null||r===void 0?void 0:r.refName)||"";return u.useEffect(()=>{N(R)},[R,n]),e.createElement("div",{className:o.container},h?e.createElement(w.ErrorMessage,{error:h}):null,e.createElement(O,{className:o.importFormContainer},e.createElement("form",{onSubmit:async f=>{var b;if(f.preventDefault(),t.setError(void 0),l)try{(a==null?void 0:a.getDisplayString())===l&&a.hasLocation()?await T({option:a,model:t,assemblyName:n}):!((b=a==null?void 0:a.results)===null||b===void 0)&&b.length?t.setSearchResults(a.results,a.getLabel(),n):s&&await V({input:l,assembly:s,model:t})}catch(C){console.error(C),i.notify(`${C}`,"warning")}}},e.createElement(m,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},e.createElement(m,{item:!0},e.createElement(d,null,e.createElement(w.AssemblySelector,{onChange:f=>{E(f)},localStorageKey:"lgv",session:i,selected:n}))),e.createElement(m,{item:!0},n?S?e.createElement(_,{style:{color:"red"}}):k?e.createElement(d,null,e.createElement(D,{value:l,setValue:N,selectedAsm:n,setOption:v,model:t})):e.createElement(B,{size:20,disableShrink:!0}):null),e.createElement(m,{item:!0},e.createElement(d,null,e.createElement(x,{type:"submit",disabled:!l,className:o.button,variant:"contained",color:"primary"},"Open")),e.createElement(d,null,e.createElement(x,{disabled:!l,className:o.button,onClick:()=>{t.setError(void 0),t.showAllRegionsInAssembly(n)},variant:"contained",color:"secondary"},"Show all regions in assembly")))))))});export{j as default};
//# sourceMappingURL=ImportForm-D3PVm7cw.js.map
