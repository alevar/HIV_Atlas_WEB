const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BreakendSingleLevelOptionDialog-DNWAR4zb.js","assets/index-CYW4W05g.js","assets/index-CGGwK_PF.css"])))=>i.map(i=>d[i]);
import{R as s,T as v,b3 as _,L as h,u as p,aG as $,b4 as A,n as R,b5 as k,a as E,c as C,_ as w}from"./index-CYW4W05g.js";import{B as D}from"./BaseCard-D3dHKUv2.js";import{n as P}from"./AlignmentsFeatureDetail-BoqnswUf.js";import"./FeatureDetails-CJeQ45pr.js";function T({tag:e,model:a}){return s.createElement("div",null,s.createElement(v,null,"List of supplementary alignment locations"),s.createElement("ul",null,e.split(";").filter(l=>!!l).map((l,c)=>{const[m,o,i,u]=l.split(","),g=_(u),y=Math.floor(g/5),t=+o,f=+o+g,n=t-y,r=f+y,S=`${m}:${Math.max(1,n)}-${r}`,d=t.toLocaleString("en-US"),L=f.toLocaleString("en-US"),N=`${m}:${d}-${L} (${i}) [${g}bp]`;return s.createElement("li",{key:`${S}-${c}`},s.createElement(h,{href:"#",onClick:async b=>{b.preventDefault(),P(S,a)}},N))})))}async function B({view:e,feature:a}){const{assemblyManager:l}=p.getSession(e),c=a.get("CIGAR"),m=a.get("strand"),o=$(a,"SA")||"",i=a.get("name"),u=A(c,1),g=await l.waitForAssembly(e.assemblyNames[0]);if(!g)throw new Error("assembly not found");const y=R(o,a.id(),m,i,!0),t=a.toJSON();t.clipPos=u,t.strand=1,t.mate={refName:i,start:u,end:u+k(c)};const f=[t,...y];return f.forEach((n,r)=>{n.refName=g.getCanonicalRefName(n.refName)||n.refName,n.syntenyId=r,n.mate.syntenyId=r,n.mate.uniqueId=`${n.uniqueId}_mate`}),f.sort((n,r)=>n.clipPos-r.clipPos),f}const I=E.lazy(()=>w(()=>import("./BreakendSingleLevelOptionDialog-DNWAR4zb.js").then(e=>e.B),__vite__mapDeps([0,1,2]))),O=E.lazy(()=>w(()=>import("./BreakendSingleLevelOptionDialog-DNWAR4zb.js").then(e=>e.a),__vite__mapDeps([0,1,2])));function M({model:e,feature:a,viewType:l}){const c=p.getSession(e),{view:m}=e,[o,i]=E.useState(),[u,g]=E.useState();E.useEffect(()=>{(async()=>{try{const t=await B({view:m,feature:new p.SimpleFeature(a)});i(t)}catch(t){g(t),console.error(t)}})()},[a,m]);const y=[];if(o)for(let t=0;t<o.length-1;t++)y.push([o[t],o[t+1]]);return y.length?s.createElement("div",null,s.createElement(v,null,"Launch split view"),u?s.createElement(C.ErrorMessage,{error:u}):null,s.createElement("ul",null,y.map((t,f)=>{const[n,r]=t;return s.createElement("li",{key:`${JSON.stringify(t)}-${f}`},n.refName,":",p.toLocale(n.strand===1?n.end:n.start)," ->"," ",r.refName,":",p.toLocale(r.strand===1?r.start:r.end)," ",s.createElement(h,{href:"#",onClick:S=>{S.preventDefault(),c.queueDialog(d=>[I,{handleClose:d,model:e,feature:new p.SimpleFeature({...n,mate:r}),viewType:l,view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])}},"(top/bottom)")," ",s.createElement(h,{href:"#",onClick:S=>{S.preventDefault(),c.queueDialog(d=>[O,{handleClose:d,model:e,feature:new p.SimpleFeature({...n,mate:r}),viewType:l,view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])}},"(single row)"))}))):null}function z(e){const{model:a,tag:l,feature:c}=e,m=p.getSession(a),{pluginManager:o}=p.getEnv(m);let i;try{i=o.getViewType("BreakpointSplitView")}catch{}return s.createElement(D,{...e,title:"Supplementary alignments"},s.createElement(T,{model:a,tag:l}),i?s.createElement(M,{viewType:i,model:a,feature:c}):null)}export{z as default};
//# sourceMappingURL=SupplementaryAlignments-DvYGjl0m.js.map
