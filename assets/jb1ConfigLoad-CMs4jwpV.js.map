{"version":3,"file":"jb1ConfigLoad-CMs4jwpV.js","sources":["../../node_modules/isobject/index.js","../../node_modules/get-value/index.js","../../node_modules/is-primitive/index.js","../../node_modules/is-plain-object/index.js","../../node_modules/set-value/index.js","../../node_modules/@jbrowse/plugin-legacy-jbrowse/esm/JBrowse1Connection/util.js","../../node_modules/@jbrowse/plugin-legacy-jbrowse/esm/JBrowse1Connection/jb1ConfigParse.js","../../node_modules/@jbrowse/plugin-legacy-jbrowse/esm/JBrowse1Connection/jb1ConfigLoad.js"],"sourcesContent":["/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nconst isObject = require('isobject');\n\nmodule.exports = function(target, path, options) {\n  if (!isObject(options)) {\n    options = { default: options };\n  }\n\n  if (!isValidObject(target)) {\n    return typeof options.default !== 'undefined' ? options.default : target;\n  }\n\n  if (typeof path === 'number') {\n    path = String(path);\n  }\n\n  const isArray = Array.isArray(path);\n  const isString = typeof path === 'string';\n  const splitChar = options.separator || '.';\n  const joinChar = options.joinChar || (typeof splitChar === 'string' ? splitChar : '.');\n\n  if (!isString && !isArray) {\n    return target;\n  }\n\n  if (isString && path in target) {\n    return isValid(path, target, options) ? target[path] : options.default;\n  }\n\n  let segs = isArray ? path : split(path, splitChar, options);\n  let len = segs.length;\n  let idx = 0;\n\n  do {\n    let prop = segs[idx];\n    if (typeof prop === 'number') {\n      prop = String(prop);\n    }\n\n    while (prop && prop.slice(-1) === '\\\\') {\n      prop = join([prop.slice(0, -1), segs[++idx] || ''], joinChar, options);\n    }\n\n    if (prop in target) {\n      if (!isValid(prop, target, options)) {\n        return options.default;\n      }\n\n      target = target[prop];\n    } else {\n      let hasProp = false;\n      let n = idx + 1;\n\n      while (n < len) {\n        prop = join([prop, segs[n++]], joinChar, options);\n\n        if ((hasProp = prop in target)) {\n          if (!isValid(prop, target, options)) {\n            return options.default;\n          }\n\n          target = target[prop];\n          idx = n - 1;\n          break;\n        }\n      }\n\n      if (!hasProp) {\n        return options.default;\n      }\n    }\n  } while (++idx < len && isValidObject(target));\n\n  if (idx === len) {\n    return target;\n  }\n\n  return options.default;\n};\n\nfunction join(segs, joinChar, options) {\n  if (typeof options.join === 'function') {\n    return options.join(segs);\n  }\n  return segs[0] + joinChar + segs[1];\n}\n\nfunction split(path, splitChar, options) {\n  if (typeof options.split === 'function') {\n    return options.split(path);\n  }\n  return path.split(splitChar);\n}\n\nfunction isValid(key, target, options) {\n  if (typeof options.isValid === 'function') {\n    return options.isValid(key, target);\n  }\n  return true;\n}\n\nfunction isValidObject(val) {\n  return isObject(val) || Array.isArray(val) || typeof val === 'function';\n}\n","/*!\n * is-primitive <https://github.com/jonschlinkert/is-primitive>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isPrimitive(val) {\n  if (typeof val === 'object') {\n    return val === null;\n  }\n  return typeof val !== 'function';\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * set-value <https://github.com/jonschlinkert/set-value>\n *\n * Copyright (c) Jon Schlinkert (https://github.com/jonschlinkert).\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst { deleteProperty } = Reflect;\nconst isPrimitive = require('is-primitive');\nconst isPlainObject = require('is-plain-object');\n\nconst isObject = value => {\n  return (typeof value === 'object' && value !== null) || typeof value === 'function';\n};\n\nconst isUnsafeKey = key => {\n  return key === '__proto__' || key === 'constructor' || key === 'prototype';\n};\n\nconst validateKey = key => {\n  if (!isPrimitive(key)) {\n    throw new TypeError('Object keys must be strings or symbols');\n  }\n\n  if (isUnsafeKey(key)) {\n    throw new Error(`Cannot set unsafe key: \"${key}\"`);\n  }\n};\n\nconst toStringKey = input => {\n  return Array.isArray(input) ? input.flat().map(String).join(',') : input;\n};\n\nconst createMemoKey = (input, options) => {\n  if (typeof input !== 'string' || !options) return input;\n  let key = input + ';';\n  if (options.arrays !== undefined) key += `arrays=${options.arrays};`;\n  if (options.separator !== undefined) key += `separator=${options.separator};`;\n  if (options.split !== undefined) key += `split=${options.split};`;\n  if (options.merge !== undefined) key += `merge=${options.merge};`;\n  if (options.preservePaths !== undefined) key += `preservePaths=${options.preservePaths};`;\n  return key;\n};\n\nconst memoize = (input, options, fn) => {\n  const key = toStringKey(options ? createMemoKey(input, options) : input);\n  validateKey(key);\n\n  const value = setValue.cache.get(key) || fn();\n  setValue.cache.set(key, value);\n  return value;\n};\n\nconst splitString = (input, options = {}) => {\n  const sep = options.separator || '.';\n  const preserve = sep === '/' ? false : options.preservePaths;\n\n  if (typeof input === 'string' && preserve !== false && /\\//.test(input)) {\n    return [input];\n  }\n\n  const parts = [];\n  let part = '';\n\n  const push = part => {\n    let number;\n    if (part.trim() !== '' && Number.isInteger((number = Number(part)))) {\n      parts.push(number);\n    } else {\n      parts.push(part);\n    }\n  };\n\n  for (let i = 0; i < input.length; i++) {\n    const value = input[i];\n\n    if (value === '\\\\') {\n      part += input[++i];\n      continue;\n    }\n\n    if (value === sep) {\n      push(part);\n      part = '';\n      continue;\n    }\n\n    part += value;\n  }\n\n  if (part) {\n    push(part);\n  }\n\n  return parts;\n};\n\nconst split = (input, options) => {\n  if (options && typeof options.split === 'function') return options.split(input);\n  if (typeof input === 'symbol') return [input];\n  if (Array.isArray(input)) return input;\n  return memoize(input, options, () => splitString(input, options));\n};\n\nconst assignProp = (obj, prop, value, options) => {\n  validateKey(prop);\n\n  // Delete property when \"value\" is undefined\n  if (value === undefined) {\n    deleteProperty(obj, prop);\n\n  } else if (options && options.merge) {\n    const merge = options.merge === 'function' ? options.merge : Object.assign;\n\n    // Only merge plain objects\n    if (merge && isPlainObject(obj[prop]) && isPlainObject(value)) {\n      obj[prop] = merge(obj[prop], value);\n    } else {\n      obj[prop] = value;\n    }\n\n  } else {\n    obj[prop] = value;\n  }\n\n  return obj;\n};\n\nconst setValue = (target, path, value, options) => {\n  if (!path || !isObject(target)) return target;\n\n  const keys = split(path, options);\n  let obj = target;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const next = keys[i + 1];\n\n    validateKey(key);\n\n    if (next === undefined) {\n      assignProp(obj, key, value, options);\n      break;\n    }\n\n    if (typeof next === 'number' && !Array.isArray(obj[key])) {\n      obj = obj[key] = [];\n      continue;\n    }\n\n    if (!isObject(obj[key])) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  return target;\n};\n\nsetValue.split = split;\nsetValue.cache = new Map();\nsetValue.clear = () => {\n  setValue.cache = new Map();\n};\n\nmodule.exports = setValue;\n","import getValue from 'get-value';\nexport function isTrack(arg) {\n    return (arg === null || arg === void 0 ? void 0 : arg.label) && typeof arg.label === 'string';\n}\nexport function isSource(arg) {\n    return (arg === null || arg === void 0 ? void 0 : arg.url) && typeof arg.url === 'string';\n}\nexport function deepUpdate(a, b) {\n    for (const prop of Object.keys(b)) {\n        if (prop in a &&\n            typeof b[prop] === 'object' &&\n            typeof a[prop] === 'object') {\n            deepUpdate(a[prop], b[prop]);\n        }\n        else if (a[prop] === undefined || b[prop] !== undefined) {\n            a[prop] = b[prop];\n        }\n    }\n    return a;\n}\n/**\n * replace variables in a template string with values\n *\n * @param template - String with variable names in curly brackets\n * e.g., `http://foo/{bar}?arg={baz.foo}`\n * @param fillWith - object with attribute-value mappings\n * e.g., `{ 'bar': 'someurl', 'baz': { 'foo': 42 } }`\n * @returns the template string with variables in fillWith replaced\n * e.g., 'htp://foo/someurl?arg=valueforbaz'\n */\nexport function fillTemplate(template, fillWith) {\n    return template.replaceAll(/{([\\s\\w.]+)}/g, (match, varName) => {\n        varName = varName.replaceAll(/\\s+/g, '');\n        const fill = getValue(fillWith, varName);\n        if (fill !== undefined) {\n            return typeof fill === 'function' ? fill(varName) : fill;\n        }\n        if (fillWith.callback) {\n            // @ts-expect-error\n            const v = fillWith.callback.call(this, varName);\n            if (v !== undefined) {\n                return v;\n            }\n        }\n        return match;\n    });\n}\n/**\n * Clones objects (including DOM nodes) and all children.\n * Warning: do not clone cyclic structures\n * (Lifted from dojo https://github.com/dojo/dojo/blob/master/_base/lang.js)\n * @param src - The object to clone\n */\nexport function clone(src) {\n    if (!src ||\n        typeof src !== 'object' ||\n        Object.prototype.toString.call(src) === '[object Function]') {\n        // null, undefined, any non-object, or function\n        return src; // anything\n    }\n    if (src.nodeType && 'cloneNode' in src) {\n        // DOM Node\n        return src.cloneNode(true); // Node\n    }\n    if (src instanceof Date) {\n        // Date\n        return new Date(src.getTime()); // Date\n    }\n    if (src instanceof RegExp) {\n        // RegExp\n        return new RegExp(src); // RegExp\n    }\n    let r;\n    if (Array.isArray(src)) {\n        // array\n        r = [];\n        for (let i = 0, l = src.length; i < l; ++i) {\n            if (i in src) {\n                r[i] = clone(src[i]);\n            }\n        }\n        // we don't clone functions for performance reasons\n        //    }else if(d.isFunction(src)){\n        //      // function\n        //      r = function(){ return src.apply(this, arguments); };\n    }\n    else {\n        // generic objects\n        r = src.constructor ? new src.constructor() : {};\n    }\n    return mixin(r, src, clone);\n}\n/**\n * Copies/adds all properties of source to dest; returns dest.\n * (Lifted from dojo https://github.com/dojo/dojo/blob/master/_base/lang.js)\n *\n * All properties, including functions (sometimes termed \"methods\"), excluding\n * any non-standard extensions found in Object.prototype, are copied/added to\n * dest. Copying/adding each particular property is delegated to copyFunc\n * (if any); copyFunc defaults to the Javascript assignment operator if not\n * provided. Notice that by default, mixin executes a so-called \"shallow copy\"\n * and aggregate types are copied/added by reference.\n * @param dest - The object to which to copy/add all properties contained in\n * source.\n * @param source - The object from which to draw all properties to copy into dest.\n * @param copyFunc - The process used to copy/add a property in source; defaults\n * to the Javascript assignment operator.\n * @returns dest, as modified\n */\nfunction mixin(dest, source, copyFunc) {\n    const empty = {};\n    for (const name in source) {\n        // the (!(name in empty) || empty[name] !== s) condition avoids copying\n        // properties in \"source\" inherited from Object.prototype.\t For example,\n        // if dest has a custom toString() method, don't overwrite it with the\n        // toString() method that source inherited from Object.prototype\n        const s = source[name];\n        if (!(name in dest) ||\n            // @ts-expect-error\n            (dest[name] !== s && (!(name in empty) || empty[name] !== s))) {\n            dest[name] = copyFunc ? copyFunc(s) : s;\n        }\n    }\n    return dest; // Object\n}\n","/* eslint no-cond-assign: [\"error\", \"except-parens\"] */\nimport getValue from 'get-value';\nimport setValue from 'set-value';\nimport { objectHash } from '@jbrowse/core/util';\nimport { isSource, isTrack } from './util';\nexport function parseJB1Json(config, url) {\n    if (typeof config === 'string') {\n        let parsedConf;\n        try {\n            parsedConf = JSON.parse(config);\n        }\n        catch (error) {\n            throw new Error(`${error} when parsing configuration.`);\n        }\n        return regularizeConf(parsedConf, url);\n    }\n    return regularizeConf(config, url);\n}\nexport function parseJB1Conf(config, url) {\n    let parsedConf;\n    try {\n        parsedConf = parse(config, url);\n    }\n    catch (error) {\n        throw new Error(`${error} when parsing configuration.`);\n    }\n    return regularizeConf(parsedConf, url);\n}\nfunction isAlwaysArray(varName) {\n    if (varName === 'include') {\n        return true;\n    }\n    return false;\n}\nfunction parse(text, url) {\n    let section = [];\n    let keyPath;\n    let operation;\n    let value;\n    const data = { tracks: {} };\n    let lineNumber;\n    function recordVal() {\n        if (value !== undefined) {\n            let parsedValue;\n            try {\n                // parse json\n                const match = /^json:(.+)/i.exec(value);\n                if (match) {\n                    parsedValue = JSON.parse(match[1]);\n                }\n                // parse numbers if it looks numeric\n                else if (/^[+-]?[\\d.,]+([eE][-+]?\\d+)?$/.test(value)) {\n                    parsedValue = Number.parseFloat(value.replaceAll(',', ''));\n                }\n                else {\n                    parsedValue = value;\n                }\n                if (!keyPath) {\n                    throw new Error(`Error parsing in section ${section.join(' - ')}`);\n                }\n                const path = [...section, ...keyPath].join('.');\n                if (operation === '+=') {\n                    let existing = getValue(data, path);\n                    if (existing) {\n                        if (!Array.isArray(existing)) {\n                            existing = [existing];\n                        }\n                    }\n                    else {\n                        existing = [];\n                    }\n                    existing.push(parsedValue);\n                    parsedValue = existing;\n                }\n                if (parsedValue === 'true') {\n                    parsedValue = true;\n                }\n                if (parsedValue === 'false') {\n                    parsedValue = false;\n                }\n                setValue(data, path, parsedValue);\n            }\n            catch (e) {\n                throw new Error(`syntax error${url ? ` in ${url}` : ''}${lineNumber ? ` at line ${lineNumber - 1}` : ''}`);\n            }\n        }\n    }\n    text.split(/\\n|\\r\\n|\\r/).forEach((textLine, i) => {\n        lineNumber = i + 1;\n        const line = textLine.replace(/^\\s*#.+/, '');\n        // new section\n        let match;\n        if ((match = /^\\s*\\[([^\\]]+)/.exec(line))) {\n            // new section\n            recordVal();\n            keyPath = undefined;\n            value = undefined;\n            section = match[1].trim().split(/\\s*\\.\\s*/);\n            if (section.length === 1 && section[0].toLowerCase() === 'general') {\n                section = [];\n            }\n        }\n        // new value\n        else if ((match = line.match(value === undefined ? /^([^+=]+)(\\+?=)(.*)/ : /^(\\S[^+=]+)(\\+?=)(.*)/))) {\n            recordVal();\n            keyPath = match[1].trim().split(/\\s*\\.\\s*/);\n            [, , operation] = match;\n            if (isAlwaysArray([...section, ...keyPath].join('.'))) {\n                operation = '+=';\n            }\n            value = match[3].trim();\n        }\n        // add to existing array value\n        else if (keyPath !== undefined &&\n            (match = /^\\s{0,4}\\+\\s*(.+)/.exec(line))) {\n            recordVal();\n            operation = '+=';\n            value = match[1].trim();\n        }\n        // add to existing value\n        else if (value !== undefined && (match = /^\\s+(\\S.*)/.exec(line))) {\n            const m = match[1];\n            value += value.length ? ` ${m.trim()}` : m.trim();\n        }\n        // done with last value\n        else {\n            recordVal();\n            keyPath = undefined;\n            value = undefined;\n        }\n    });\n    recordVal();\n    return data;\n}\n/**\n * Applies defaults and any other necessary tweaks to the loaded configuration.\n * @param conf - the object containing the configuration, which it modifies\n * in-place\n * @param url - URL of the config file\n * @returns the same object it was passed\n */\nexport function regularizeConf(conf, url) {\n    // if tracks is not an array, convert it to one\n    if (conf.tracks && !Array.isArray(conf.tracks)) {\n        // if it's a single track config, wrap it in an arrayref\n        if (isTrack(conf.tracks)) {\n            conf.tracks = [conf.tracks];\n        }\n        // otherwise, coerce it to an array\n        else {\n            const tracks = [];\n            for (const label of Object.keys(conf.tracks)) {\n                const track = conf.tracks[label];\n                if (isTrack(track)) {\n                    tracks.push(track);\n                }\n                else {\n                    tracks.push({ label, ...track });\n                }\n            }\n            conf.tracks = tracks;\n        }\n    }\n    // regularize trackMetadata.sources\n    const meta = conf.trackMetadata;\n    if (meta === null || meta === void 0 ? void 0 : meta.sources) {\n        // if it's a single source config, wrap it in an arrayref\n        if (typeof meta.sources === 'string') {\n            meta.sources = [meta.sources];\n        }\n        if (isSource(meta.sources)) {\n            meta.sources = [meta.sources];\n        }\n        if (!Array.isArray(meta.sources)) {\n            const sources = [];\n            for (const name of Object.keys(meta.sources)) {\n                const source = meta.sources[name];\n                if (!('name' in source)) {\n                    source.name = name;\n                }\n                sources.push(source);\n            }\n            meta.sources = sources;\n        }\n        // coerce any string source defs to be URLs, and try to detect their types\n        meta.sources = meta.sources.map((sourceDef) => {\n            if (typeof sourceDef === 'string') {\n                const newSourceDef = { url: sourceDef };\n                const typeMatch = /\\.(\\w+)$/.exec(sourceDef);\n                if (typeMatch) {\n                    newSourceDef.type = typeMatch[1].toLowerCase();\n                }\n                return newSourceDef;\n            }\n            return sourceDef;\n        });\n    }\n    conf.sourceUrl = conf.sourceUrl || url;\n    if (conf.sourceUrl.startsWith('/')) {\n        conf.sourceUrl = new URL(conf.sourceUrl, window.location.href).href;\n    }\n    conf.baseUrl = conf.baseUrl || new URL('.', conf.sourceUrl).href;\n    if (conf.baseUrl.length && !conf.baseUrl.endsWith('/')) {\n        conf.baseUrl += '/';\n    }\n    if (conf.sourceUrl) {\n        // set a default baseUrl in each of the track and store confs, and the names\n        // conf, if needed\n        const addBase = [];\n        if (conf.tracks) {\n            addBase.push(...conf.tracks);\n        }\n        if (conf.stores) {\n            addBase.push(...Object.values(conf.stores));\n        }\n        if (conf.names) {\n            addBase.push(conf.names);\n        }\n        addBase.forEach((t) => {\n            if (!t.baseUrl) {\n                t.baseUrl = conf.baseUrl || '/';\n            }\n        });\n        // resolve the refSeqs and nameUrl if present\n        if (conf.refSeqs && typeof conf.refSeqs === 'string') {\n            conf.refSeqs = new URL(conf.refSeqs, conf.sourceUrl).href;\n        }\n        if (conf.nameUrl) {\n            conf.nameUrl = new URL(conf.nameUrl, conf.sourceUrl).href;\n        }\n    }\n    conf.stores = conf.stores || {};\n    (conf.tracks || []).forEach((trackConfig) => {\n        // if there is a `config` subpart, just copy its keys in to the top-level\n        // config\n        if (trackConfig.config) {\n            const c = trackConfig.config;\n            trackConfig.config = undefined;\n            trackConfig = { ...c, ...trackConfig };\n        }\n        // skip if it's a new-style track def\n        if (trackConfig.store) {\n            return;\n        }\n        let trackClassName;\n        if (trackConfig.type === 'FeatureTrack') {\n            trackClassName = 'JBrowse/View/Track/HTMLFeatures';\n        }\n        else if (trackConfig.type === 'ImageTrack') {\n            trackClassName = 'JBrowse/View/Track/FixedImage';\n        }\n        else if (trackConfig.type === 'ImageTrack.Wiggle') {\n            trackClassName = 'JBrowse/View/Track/FixedImage/Wiggle';\n        }\n        else if (trackConfig.type === 'SequenceTrack') {\n            trackClassName = 'JBrowse/View/Track/Sequence';\n        }\n        else {\n            trackClassName = regularizeClass('JBrowse/View/Track', trackConfig.type);\n        }\n        trackConfig.type = trackClassName;\n        synthesizeTrackStoreConfig(conf, trackConfig);\n        if (trackConfig.histograms) {\n            if (!trackConfig.histograms.baseUrl) {\n                trackConfig.histograms.baseUrl = trackConfig.baseUrl;\n            }\n            synthesizeTrackStoreConfig(conf, trackConfig.histograms);\n        }\n    });\n    return conf;\n}\n/**\n * prefix class name with `root` if it contains no slashes\n * @param root - Prefix root\n * @param className - class name\n */\nfunction regularizeClass(root, className) {\n    if (!className) {\n        return '';\n    }\n    if (!className.includes('/')) {\n        className = `${root}/${className}`;\n    }\n    className = className.replace(/^\\//, '');\n    return className;\n}\nfunction guessStoreClass(trackConfig, urlTemplate) {\n    var _a, _b;\n    if (!trackConfig) {\n        return '';\n    }\n    if ((_a = trackConfig.type) === null || _a === void 0 ? void 0 : _a.includes('/FixedImage')) {\n        return `JBrowse/Store/TiledImage/Fixed${trackConfig.backendVersion === 0 ? '_v0' : ''}`;\n    }\n    if (/\\.jsonz?$/i.test(urlTemplate)) {\n        return `JBrowse/Store/SeqFeature/NCList${trackConfig.backendVersion === 0 ? '_v0' : ''}`;\n    }\n    if (/\\.bam$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BAM';\n    }\n    if (/\\.cram$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/CRAM';\n    }\n    if (/\\.gff3?$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/GFF3';\n    }\n    if (/\\.bed$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BED';\n    }\n    if (/\\.vcf.b?gz$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/VCFTabix';\n    }\n    if (/\\.gff3?.b?gz$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/GFF3Tabix';\n    }\n    if (/\\.bed.b?gz$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BEDTabix';\n    }\n    if (/\\.(bw|bigwig)$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BigWig';\n    }\n    if (/\\.(bb|bigbed)$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BigBed';\n    }\n    if (/\\.(fa|fasta)$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/IndexedFasta';\n    }\n    if (/\\.(fa|fasta)\\.b?gz$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/BgzipIndexedFasta';\n    }\n    if (/\\.2bit$/i.test(urlTemplate)) {\n        return 'JBrowse/Store/SeqFeature/TwoBit';\n    }\n    if ((_b = trackConfig.type) === null || _b === void 0 ? void 0 : _b.endsWith('/Sequence')) {\n        return 'JBrowse/Store/Sequence/StaticChunked';\n    }\n    return '';\n}\nfunction synthesizeTrackStoreConfig(mainConf, trackConfig) {\n    var _a;\n    // figure out what data store class to use with the track, applying some\n    // defaults if it is not explicit in the configuration\n    const { urlTemplate = '' } = trackConfig;\n    const storeClass = trackConfig.storeClass\n        ? regularizeClass('JBrowse/Store', trackConfig.storeClass)\n        : guessStoreClass(trackConfig, urlTemplate);\n    if (!storeClass) {\n        console.warn(`Unable to determine an appropriate data store to use with track '${trackConfig.label}', please explicitly specify a storeClass in the configuration.`);\n        return;\n    }\n    // synthesize a separate store conf\n    const storeConf = { ...trackConfig, type: storeClass };\n    // if this is the first sequence store we see, and we have no refseqs store\n    // defined explicitly, make this the refseqs store.\n    storeConf.name =\n        (storeClass === 'JBrowse/Store/Sequence/StaticChunked' ||\n            storeClass === 'JBrowse/Store/Sequence/IndexedFasta' ||\n            storeClass === 'JBrowse/Store/SeqFeature/IndexedFasta' ||\n            storeClass === 'JBrowse/Store/SeqFeature/BgzipIndexedFasta' ||\n            storeClass === 'JBrowse/Store/SeqFeature/TwoBit' ||\n            storeClass === 'JBrowse/Store/Sequence/TwoBit' ||\n            trackConfig.useAsRefSeqStore) &&\n            !((_a = mainConf.stores) === null || _a === void 0 ? void 0 : _a.refseqs)\n            ? 'refseqs'\n            : `store${objectHash(storeConf)}`;\n    // record it\n    if (!mainConf.stores) {\n        mainConf.stores = {};\n    }\n    mainConf.stores[storeConf.name] = storeConf;\n    // connect it to the track conf\n    trackConfig.store = storeConf.name;\n}\n","import { openLocation } from '@jbrowse/core/util/io';\nimport { parseJB1Json, parseJB1Conf, regularizeConf } from './jb1ConfigParse';\nimport { clone, deepUpdate, fillTemplate } from './util';\nfunction isUriLocation(location) {\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return location.uri !== undefined;\n}\nfunction isLocalPathLocation(location) {\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return location.localPath !== undefined;\n}\nexport async function fetchJb1(\n// eslint-disable-next-line unicorn/no-object-as-default-parameter\ndataRoot = { uri: '', locationType: 'UriLocation' }, \n// eslint-disable-next-line unicorn/no-object-as-default-parameter\nbaseConfig = {\n    include: ['{dataRoot}/trackList.json', '{dataRoot}/tracks.conf'],\n}, \n// eslint-disable-next-line unicorn/no-object-as-default-parameter\nbaseConfigRoot = { uri: '', locationType: 'UriLocation' }) {\n    const protocol = 'uri' in dataRoot ? 'uri' : 'localPath';\n    const dataRootReg = JSON.parse(JSON.stringify(dataRoot));\n    let dataRootLocation = '';\n    if (isUriLocation(dataRoot)) {\n        dataRootLocation = dataRoot.uri;\n    }\n    if (isLocalPathLocation(dataRoot)) {\n        dataRootLocation = dataRoot.localPath;\n    }\n    if (dataRootLocation.endsWith('/')) {\n        dataRootReg[protocol] = dataRootLocation.slice(0, -1);\n    }\n    if ((isUriLocation(baseConfigRoot) && baseConfigRoot.uri) ||\n        (isLocalPathLocation(baseConfigRoot) && baseConfigRoot.localPath)) {\n        const baseProtocol = 'uri' in baseConfigRoot ? 'uri' : 'localPath';\n        let baseConfigLocation = '';\n        if (isUriLocation(baseConfigRoot)) {\n            baseConfigLocation = baseConfigRoot.uri;\n        }\n        if (isLocalPathLocation(baseConfigRoot)) {\n            baseConfigLocation = baseConfigRoot.localPath;\n        }\n        if (baseConfigLocation.endsWith('/')) {\n            baseConfigLocation = baseConfigLocation.slice(0, -1);\n        }\n        let newConfig = {};\n        for (const conf of ['jbrowse.conf', 'jbrowse_conf.json']) {\n            let fetchedConfig = null;\n            try {\n                // @ts-expect-error\n                fetchedConfig = await fetchConfigFile({\n                    [baseProtocol]: `${baseConfigLocation}/${conf}`,\n                });\n            }\n            catch (error) {\n                console.error(`tried to access ${baseConfigLocation}/${conf}, but failed`);\n            }\n            newConfig = mergeConfigs(newConfig, fetchedConfig) || {};\n        }\n        if (dataRootReg[protocol]) {\n            newConfig.dataRoot = dataRootReg[protocol];\n        }\n        return createFinalConfig(newConfig);\n    }\n    const newConfig = regularizeConf(baseConfig, window.location.href);\n    if (dataRootReg[protocol]) {\n        newConfig.dataRoot = dataRootReg[protocol];\n    }\n    return createFinalConfig(newConfig);\n}\nexport async function createFinalConfig(baseConfig, defaults = configDefaults) {\n    const configWithDefaults = deepUpdate(clone(defaults), baseConfig);\n    let finalConfig = await loadIncludes(configWithDefaults);\n    finalConfig = mergeConfigs(finalConfig, baseConfig) || finalConfig;\n    fillTemplates(finalConfig, finalConfig);\n    validateConfig(finalConfig);\n    return finalConfig;\n}\nexport async function fetchConfigFile(location) {\n    const result = await openLocation(location).readFile('utf8');\n    if (isUriLocation(location)) {\n        return parseJb1(result, location.uri);\n    }\n    if (isLocalPathLocation(location)) {\n        return parseJb1(result, location.localPath);\n    }\n    return parseJb1(result);\n}\nexport function parseJb1(config, url = '') {\n    if (config.trim().startsWith('{')) {\n        return parseJB1Json(config, url);\n    }\n    return parseJB1Conf(config, url);\n}\n/**\n * Merges config object b into a. Properties in b override those in a.\n */\nfunction mergeConfigs(a, b) {\n    if (b === null) {\n        return null;\n    }\n    if (a === null) {\n        a = {};\n    }\n    for (const prop of Object.keys(b)) {\n        if (prop === 'tracks' && prop in a) {\n            const aTracks = a[prop] || [];\n            const bTracks = b[prop] || [];\n            if (Array.isArray(aTracks) && Array.isArray(bTracks)) {\n                a[prop] = mergeTrackConfigs(aTracks, bTracks);\n            }\n            else {\n                throw new Error(`Track config has not been properly regularized: ${aTracks} ${bTracks}`);\n            }\n        }\n        else if (!noRecursiveMerge(prop) &&\n            prop in a &&\n            // @ts-expect-error\n            typeof b[prop] === 'object' &&\n            // @ts-expect-error\n            typeof a[prop] === 'object') {\n            // @ts-expect-error\n            a[prop] = deepUpdate(a[prop], b[prop]);\n        }\n        else if (prop === 'dataRoot') {\n            if (a[prop] === undefined ||\n                (a[prop] === 'data' && b[prop] !== undefined)) {\n                a[prop] = b[prop];\n            }\n            // @ts-expect-error\n        }\n        else if (a[prop] === undefined || b[prop] !== undefined) {\n            // @ts-expect-error\n            a[prop] = b[prop];\n        }\n    }\n    return a;\n}\n/**\n * Special-case merging of two `tracks` configuration arrays.\n */\nfunction mergeTrackConfigs(a, b) {\n    if (!b.length) {\n        return a;\n    }\n    // index the tracks in `a` by track label\n    const aTracks = {};\n    a.forEach((t, i) => {\n        t.index = i;\n        aTracks[t.label] = t;\n    });\n    b.forEach((bT) => {\n        const aT = aTracks[bT.label];\n        if (aT) {\n            mergeConfigs(aT, bT);\n        }\n        else {\n            a.push(bT);\n        }\n    });\n    return a;\n}\n/**\n * Recursively fetch, parse, and merge all the includes in the given config\n * object.  Calls the callback with the resulting configuration when finished.\n * @param inputConfig - Config to load includes into\n */\nasync function loadIncludes(inputConfig) {\n    inputConfig = clone(inputConfig);\n    async function loadRecur(config, upstreamConf) {\n        const sourceUrl = config.sourceUrl || config.baseUrl;\n        if (!sourceUrl) {\n            throw new Error(`Could not determine source URL: ${JSON.stringify(config)}`);\n        }\n        const newUpstreamConf = mergeConfigs(clone(upstreamConf), config);\n        if (!newUpstreamConf) {\n            throw new Error('Problem merging configs');\n        }\n        const includes = fillTemplates(regularizeIncludes(config.include || []), newUpstreamConf);\n        config.include = undefined;\n        const loads = includes.map(async (include) => {\n            include.cacheBuster = inputConfig.cacheBuster;\n            const includedData = await fetchConfigFile({\n                uri: new URL(include.url, sourceUrl).href,\n                locationType: 'UriLocation',\n            });\n            return loadRecur(includedData, newUpstreamConf);\n        });\n        const includedDataObjects = await Promise.all(loads);\n        includedDataObjects.forEach((includedData) => {\n            config = mergeConfigs(config, includedData) || config;\n        });\n        return config;\n    }\n    return loadRecur(inputConfig, {});\n}\nfunction regularizeIncludes(includes) {\n    if (!includes) {\n        return [];\n    }\n    // coerce include to an array\n    if (!Array.isArray(includes)) {\n        includes = [includes];\n    }\n    return includes.map((include) => {\n        // coerce bare strings in the includes to URLs\n        if (typeof include === 'string') {\n            include = { url: include };\n        }\n        // set defaults for format and version\n        if (!('format' in include)) {\n            include.format = include.url.endsWith('.conf') ? 'conf' : 'JB_json';\n        }\n        if (include.format === 'JB_json' && !('version' in include)) {\n            include.version = 1;\n        }\n        return include;\n    });\n}\nfunction fillTemplates(subconfig, config) {\n    if (!subconfig) {\n        return subconfig;\n    }\n    if (Array.isArray(subconfig)) {\n        for (let i = 0; i < subconfig.length; i += 1) {\n            subconfig[i] = fillTemplates(subconfig[i], config);\n        }\n    }\n    else if (typeof subconfig === 'object') {\n        const sub = subconfig;\n        for (const name of Object.keys(sub)) {\n            sub[name] = fillTemplates(sub[name], config);\n        }\n    }\n    else if (typeof subconfig === 'string') {\n        // @ts-expect-error\n        return fillTemplate(subconfig, config);\n    }\n    return subconfig;\n}\n/**\n * list of config properties that should not be recursively merged\n * @param propName - name of config property\n */\nfunction noRecursiveMerge(propName) {\n    return propName === 'datasets';\n}\nconst configDefaults = {\n    tracks: [],\n    containerID: 'GenomeBrowser',\n    dataRoot: 'data',\n    show_tracklist: true,\n    show_nav: true,\n    show_menu: true,\n    show_overview: true,\n    show_fullviewlink: true,\n    update_browser_title: true,\n    updateBrowserURL: true,\n    refSeqs: '{dataRoot}/seq/refSeqs.json',\n    include: ['jbrowse.conf', 'jbrowse_conf.json'],\n    nameUrl: '{dataRoot}/names/root.json',\n    datasets: {\n        _DEFAULT_EXAMPLES: true,\n        volvox: { url: '?data=sample_data/json/volvox', name: 'Volvox Example' },\n        modencode: {\n            url: '?data=sample_data/json/modencode',\n            name: 'MODEncode Example',\n        },\n        yeast: { url: '?data=sample_data/json/yeast', name: 'Yeast Example' },\n    },\n    highlightSearchedRegions: false,\n    highResolutionMode: 'auto',\n};\n/**\n * Examine the loaded and merged configuration for errors.  Throws\n * exceptions if it finds anything amiss.\n * @returns nothing meaningful\n */\nfunction validateConfig(config) {\n    if (!config.tracks) {\n        config.tracks = [];\n    }\n    if (!config.baseUrl) {\n        throw new Error('Must provide a `baseUrl` in configuration');\n    }\n}\n"],"names":["isobject","val","isObject","require$$0","getValue","target","path","options","isValidObject","isArray","isString","splitChar","joinChar","isValid","segs","split","len","idx","prop","join","hasProp","n","key","isPrimitive","isObjectObject","o","isPlainObject","ctor","prot","deleteProperty","require$$1","value","isUnsafeKey","validateKey","toStringKey","input","createMemoKey","memoize","fn","setValue","splitString","sep","preserve","parts","part","push","number","i","assignProp","obj","merge","keys","next","setValue_1","isTrack","arg","isSource","deepUpdate","a","b","fillTemplate","template","fillWith","match","varName","fill","v","clone","src","r","l","mixin","dest","source","copyFunc","empty","name","s","parseJB1Json","config","url","parsedConf","error","regularizeConf","parseJB1Conf","parse","isAlwaysArray","text","section","keyPath","operation","data","lineNumber","recordVal","parsedValue","existing","textLine","line","m","conf","tracks","label","track","meta","sources","sourceDef","newSourceDef","typeMatch","addBase","t","trackConfig","c","trackClassName","regularizeClass","synthesizeTrackStoreConfig","root","className","guessStoreClass","urlTemplate","_a","_b","mainConf","storeClass","storeConf","objectHash","isUriLocation","location","isLocalPathLocation","fetchJb1","dataRoot","baseConfig","baseConfigRoot","protocol","dataRootReg","dataRootLocation","baseProtocol","baseConfigLocation","newConfig","fetchedConfig","fetchConfigFile","mergeConfigs","createFinalConfig","defaults","configDefaults","configWithDefaults","finalConfig","loadIncludes","fillTemplates","validateConfig","result","openLocation","parseJb1","aTracks","bTracks","mergeTrackConfigs","noRecursiveMerge","bT","aT","inputConfig","loadRecur","upstreamConf","sourceUrl","newUpstreamConf","includes","regularizeIncludes","loads","include","includedData","subconfig","sub","propName"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}